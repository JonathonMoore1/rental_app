<link rel="stylesheet" href="../public/assets/css/style.css" type="text/css">

<body class="owner">

<div class="row">
	<div class="col-md-2"></div>
	<div class="col-md-8">
	<div class="card">
	  <div class="card-body">
	    <h2>Welcome! What Item(s) Are You Listing For Rent Today?</h2>
	    <br>
	    <form>
	    	<div class="row">
	    		<div class="col-md-6">
			    	<div class="form-group">
					    <label for="exampleFormControlInput1">Item Name </label> 
					    <input type="item" class="form-control" id="item-name" placeholder="ex: golf clubs">
					 </div>
					</div>
					<div class="col-md-6">
				    	<div class="form-group">
						    <label for="item-category">Category</label>
						    <select class="form-control" id="item-category">
						      <option>Water Sports</option>
						      <option>Camping/Hiking</option>
						      <option>Winter Sports</option>
						      <option>Fishing</option>
						      <option>Golf</option>
						    </select>
						 </div>
					</div>
				</div>
			<div class="row">
				<form>
				  <div class="form-group col-md-3">
				    <label for="item-img">Upload Photo of Item</label>
				    <input type="file" class="imageFile" id="item-img">
				  </div>
				</form>
				<div class="col-md-3">
					<label for="item-price">Rental Price</label>
			    <input type="text" class="form-control" id="item-price">
				</div>
				<div class="col-md-6">
					<label for="item-description">Item Description</label>
			    <input type="text" class="form-control" id="item-description">
				</div>
			</div>
			 <div class="form-group">
			    <label for="item-location">Location</label>
			    <input type="location" class="form-control" id="item-location">
			 </div>
			 {{!-- <div class="row">
			 	<div class="col-md-4">
					 <div class="form-group">
					    <label for="dateNeeded">Date Available From: </label>
					    <input type="date" class="form-control" id="day">
					 </div>
				</div>
				<div class="col-md-4">
					<div class="form-group">
					    <label for="dateNeeded">To: </label>
					    <input type="date" class="form-control" id="day">
					 </div>
				</div> --}}
			</div>
			 <br>
			 <button id="ownerSubmit" type="submit" class="btn btn-primary mb-2">Submit <i class="fas fa-search"></i></button> 
		</form>
	  </div>

	</div>
	</div>
</div>

<div class ="row" id="results"></div>

<br><br>

<br><br><br>
<div class="row">
	<div class="col-md-3"></div>
	<div class="card" style="width: 18rem;">
	  <img class="card-img-top" id="photo" src="../public/assets/css/images/paddleboard.jpg", alt="Card image cap">
	  <div class="card-body">
	    <h5 class="card-title" id="itemName">SUP Paddleboard</h5>
	    <p class="card-text" id="itemDesc">Perfect way to experience all the sites of Tahoe from the lake! Get an excellent workout on this easy to use board.</p>
	  </div>
	  <ul class="list-group list-group-flush">
	    <li class="list-group-item" id="category">Water Sports</li>
	    <li class="list-group-item" id="price">$25/day, $130/week</li>
	    <li class="list-group-item" id="location">Lake Tahoe, UT</li>
	    <li class="list-group-item" id="owner">Jessica</li>
	  </ul>
	</div>
	<div class="col-md-1"></div>
	<div class="card" style="width: 18rem;">
	  <img class="card-img-top" id="photo" src="../public/assets/css/images/mtnbike.jpg", alt="Card image cap">
	  <div class="card-body">
	    <h5 class="card-title" id="itemName">Mountain Bike</h5>
	    <p class="card-text" id="itemDesc">Checkout the Tahoe Bike Map for turn by turn directions along the lake's rim. And, for places to stop and expected terrain. Biking the region is my favorite activity.</p>
	  </div>
	  <ul class="list-group list-group-flush">
	    <li class="list-group-item" id="category">Biking</li>
	    <li class="list-group-item" id="price">$10/day, $50/week</li>
	    <li class="list-group-item" id="location">Lake Tahoe, UT</li>
	    <li class="list-group-item" id="owner">Jessica</li>
	  </ul>
	</div>
</div>


<div class="modal" id="#myModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Enter Username</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
		<form>
		  <div class="form-group">
		    <label for="username">Username</label>
		    <input type="username" class="form-control" id="userName" placeholder="Username">
		    <div class = "modalInfo"></div>
		  </div>
		</form>
      </div>
      <div class="modal-footer">
        <button type="submit" id="resultsModal" class="btn btn-primary">Submit</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" id="newUser" class="brn btn-secondary" data-dismiss="modal">Create New User</button>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
    $(window).on('load',function(){
    	console.log("show modal");
        $('.modal').modal('show');
    });

    $("#resultsModal").on('click', function() {

	var userName = $('#userName').val().trim();
	console.log(userName);

	$.ajax({
      url : "/api/rental/",
      method: "GET"
    }).then(function(data) {
      console.log(data.length);
      for (i = 0; i < data.length; i++) {
      	var name = data[i].username;
        var item = data[i].item
        var category = data[i].category;
        var describe = data[i].description;
        var location = data[i].location;
        var rate = data[i].rate;

        if (userName === name) {
          $('.modal').modal('hide');
          var newImage = $("<div>");
          newImage.addClass("card", "col-md-4");
          newImage.attr("id", "newCard");
          newImage.html("Item: " + item + "<br>" + "Category: " + category + "<br> " + "Location: " + location  + "<br>" + "Description: " + describe + "<br>" + "Rate: " + rate);
          $('#results').append(newImage);
        }
        else {
        	$('.modalInfo').html("Invalid username");
        	$('#newUser').css("display", "block");
        }

      }
      

      //console.log(data);

    });

});


</script>


</body>
